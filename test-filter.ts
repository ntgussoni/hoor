import { filterTranscriptionContent } from "./src/lib/openai-filter";

async function testFilter() {
  // Put your example transcription here
  const exampleTranscription = `
   unknown: Let's   try.   Hi.   Hi.   Hi.   Welcome.   What   can   I   do   for   you   today?   Uh,   this   is   Bobby.   Um,   Bobby   has   been,   uh,   coughing   for   a   few   days   now.   Okay.   You   have   the   idea   that   it's   getting   worse   or   it's   getting   better   or   it's   just   keeping   the   same?   Um,   it's,   it's   getting   a   little   bit   worse,   I   think.   Okay.   So   he   still   eating?   Uh,   other   ways   he's   fine.   Yes,   he's   eating.   He's   having   a,   yeah,   normal   day.   He   wants   to   go   out.   Everything   goes   good.   But   when   he's   at   home,   he   start   coughing   again.   Okay.   And   mainly   when   he's   resting   or   when   he's   busy?   Hmm,   not   sure   about   that.   It   doesn't   matter.   Okay.   Um,   I   hear   it,   I   think,   at   night.   Okay.   And   how   is   his,   um,   c-   uh,   I   don't   know...   Um,   is   he   still   walking   as   much   as   he   used   to   or   is   he   going   a   bit   slow?   Um,   well,   he   is   12   now,   so   yeah,   he   walk,   he   walks   as   he   can   for   a   12   years   old   dog.   Okay.   Okay.   Uh,   has   he   been   puking?   Any   diarrhea?   Um,   no.   Sometimes   he   likes,   when   he   cough,   he,   he,   he   like   vomits   a   little   bit.   Okay.   All   right.   Let's   put   him   on   the   table   and   take   a   look.   Okay.   Bobby,   go,   go.   Um,   let's   see.   He's   a   little   bit   fat.   I   don't   know   what   you   feed   him,   but   maybe   give   him   a   little   less.   I   give   him,   I   give   him   raw   food.   Raw   food.   Raw   food?   Yeah.   All   right.   All   right.   How   much   does   he   get?   Ah,   I   don't   know.   Let's   say   200   grams   of,   yeah,   raw,   this   raw   sausage   that   you   can   buy.   Okay,   good,   good.   Um,   I   notice   his   breathing   is   a   little   bit   more   frequent   than   what   we're   used   to.   Uh,   his   pulse   is   good.   Let's   check   his   temperature,   if   you   can   hold   him   for   me   for   a   little   bit.   Yeah,   where   are   you   going   to   take   the   temperature?   Uh,   eventually.   What?   So   if   you   hold   him   with   the   head-   Yeah.   ...   I   will   put   the   thermometer   in.   Okay.   Okay.   So?   All   right.   His   temperature   is   40.1.   Oh.   So   he   has   a   little   bit   of   a   fever.   Oh,   okay.   Um,   and   when   I   listen   to   his   heart   and   his   lungs-   Hmm.   ...   um,   his   heart   is   fine,   but   his   lungs   sounds   a   little   bit,   um,   infected.   Oh.   Oh,   how?   Um,   so   I   think,   I   think   he   might   have,   uh,   pneumonia.   Oh,   why?   He   lives   inside.   You   have   a   dog   that   lives   inside?   Yeah.   He's   just   go   out   for   a   walk.   Can   you   repeat   that   one   more   time?   He's   just   go   out   for   a   walk,   then   he   is   inside   the   whole   day.   He   must   meet   other   dogs.   Ah,   okay.   Maybe.   He   can   get   pneumonia   from   other   dogs.   Oh.   How?   Well,   when   they   play   or   when   they   sniff   each   other   or   even   when   they   smell   the   grass   that   another   dog   just   smelled.   Ah,   okay.   So,   okay.   What,   what,   what   do   I   have   to   do   now   then?   Can   he   die?   We   can   start   him   on,   we   can   start   him   on   the   antibiotics   and   then   it   should   get   a   lot   better   within   a   few   days.   Okay.   And,   uh,   but   my   dog   doesn't   eat   pills.   We   can   give   him   a   fluid   with   the   antibiotics.   That's   fine.   Ah,   that's   good.   Okay.   And,   uh,   this   is   gonna   cure   him   and   he's   gonna   be   fine?   It   should.   Okay.   Yes,   it   should.   If   he's   not   getting   better   within   two   days   or   if   he's   getting   worse,   give   me   a   call.   Okay,   we   will   do   that   then.   All   right.   And   also,   if   he   stops   eating   or   if   he   doesn't   want   to   walk   anymore,   let   me   know.   Okay,   good.   Do   we   need   to   do   something   extra?   Maybe,   I   don't   know,   he's   old.   You   can   give   him   some   coughing   syrup.   Mm-hmm.   ...   uh,   just   to   make   his   life   a   little   bit   easier.   Um,   it   wouldn't   hurt   to,   uh,   deworm   him   as   well   since   he's   eating   raw   food.   Okay,   good.   Good.   And,   um-   Should   help.   ...   uh,   when,   when   should   I   come   back?   You   come   back,   um,   in   five   days.   Okay.   And   if   he's   not   getting   better   within   two,   you   come   back   before   then.   Okay,   okay,   let's   do   that   then.   All   right.   You   have   any   more   questions   for   us?   Um,   yeah,   I   think   his   vac-   vaccinations   are,   uh,   I   haven't   give   him   the   vaccinations   for   a   long   time.   Can   we   vaccinate   him   now?   Not   now,   because   the   antibiotics,   uh,   make   the   vaccine   not   work.   Um,   but   when   he's   getting   all   better,   uh,   let's   say   maybe   two   to   four   weeks,   we   should   vaccinate   him,   yes.   Okay,   okay.   Then   I   come   back   in   two   days   if   he   is   not   okay,   in   a   week   if   he's   fine,   and   then   we   can   plan   the   vaccinations.   Yes,   very   good.   Okay,   super   good   then.   That's   what   I   gonna   do.   All   right.   See   you   soon.   Okay.   Bye-bye.   Bye.   Let's   see.   I   ho-
  `;

  try {
    console.log("Testing OpenAI filter...\n");
    console.log("Original transcription:");
    console.log("=".repeat(50));
    console.log(exampleTranscription);
    console.log("=".repeat(50));

    const filteredResult = await filterTranscriptionContent(
      exampleTranscription
    );

    console.log("\nFiltered medical chart:");
    console.log("=".repeat(50));
    console.log(filteredResult);
    console.log("=".repeat(50));
  } catch (error) {
    console.error("Test failed:", error);
  }
}

// Run the test
testFilter();
